{% extends 'base2.html' %}
{% load i18n %}
{% block content %}
<nav aria-label="breadcrumb" class="mobile-margin-top">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="{% url 'business-list' %}">{% translate "Businesses" %}</a></li>
        <li class="breadcrumb-item"><a href="{% url 'view_business' business.id %}">{{business.name}}</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ blog.title | capfirst }}</li>
    </ol>
</nav>
<div class="container mt-5">
    <h1 class="mb-4">{{ blog.title }}</h1>
    <form method="post" action="{% url 'blog_detail' blog.slug %}">
        {% csrf_token %}
        <div class="mb-3">
            <label for="id_title" class="form-label">{% translate "Title" %}</label>
            {{ form.title }}
        </div>
        <div class="mb-3">
            <label for="id_description" class="form-label">{% translate "Description" %}</label>
            {{ form.description }}
        </div>
        <div class="form-check mb-3">
            {{ form.is_active }}
            <label class="form-check-label" for="id_is_active">{% translate "Is Active" %}</label>
        </div>
        <button type="submit" class="btn btn-primary">{% translate "Save" %}</button>
        <a href="{% url 'blog_detail' blog.slug %}" class="btn btn-secondary">{% translate "Cancel" %}</a>
    </form>
</div>
<div class="container mt-5">    
    <a href="{% url 'new_post' blog.slug %}" class="btn btn-primary mb-3">{% translate "Add Post" %}</a>
    <h3>Posts</h3>
    <div class="list-group">
        {% for post in blog.posts.all %}
        <div class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            <div>
                <h5 class="mb-1">{{ post.title }}</h5>
                <small>{{ post.author.get_full_name }} â€” <a href="{% url 'blog_detail' blog.slug %}">{{ blog.title }}</a></small>
                <p class="mb-1"><small>Last edited: {{ post.updated_at|date:"M d, Y H:i a" }}</small></p>
            </div>
            <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton{{ forloop.counter }}" data-bs-toggle="dropdown" aria-expanded="false">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
                <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton{{ forloop.counter }}">
                    <li><a class="dropdown-item" href="{% url 'edit_post' blog.slug post.slug %}">{% translate "View" %}</a></li>
                    <li><a class="dropdown-item delete-post" href="#">{% translate "Delete" %}</a></li>
                </ul>
            </div>
        </div>
        {% endfor %}
    </div>
</div>

{% endblock %}
