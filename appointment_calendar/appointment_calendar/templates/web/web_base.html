{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Your Site Title{% endblock %}</title>
    <link rel="stylesheet" href="{% static 'css/web_base.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">

    <!-- Styles coming from the user configuration saved on BusinessAppearance model-->
    <style>
        .appearance-header-bar {
            background-color: {{ business.appearance.header_bar_color|default:"#ffffff" }};
        }

        .appearance-background {
            background-color: {{ business.appearance.background_color|default:"#defdef" }};
        }

        div, p, .appearance-font-color {
            color: {{ business.appearance.text_color|default:"#defdef" }};
        }

        .section-header-font-color {
            color: {{ business.appearance.section_header_font_color|default:"#defdef" }};
        }

    </style>  
    {% block extra_css %}  
    {% endblock extra_css %}
</head>
<body class="appearance-background">
    <div class="container-wide appearance-background ">
        <div class="header-bar appearance-header-bar">{{business.name}}
            <button id="sidebarCollapse">
                <i class="fas fa-bars"></i> <!-- Default icon -->
            </button>
        </div>

        <div class="sidebar" id="mySidebar">
            <a href="{% url 'web_business' business_id=business.id %}">Home</a>
            <a href="#">Blog</a>
        </div>

        <div class="main">
            {% block content %}
            <!-- Main content goes here -->
            {% endblock content %}
        </div>

        <footer class="container-fluid bg-dark text-white py-3">
            <div class="container">
                <div class="row">
                    <!-- Left Section for Opening Hours -->
                    <div class="col-md-6" style="text-align: center;">
                        <h5>Opening Hours</h5>
                        <ul class="list-unstyled">
                            {% for hours in business.opening_hours.all %}
                                <li>{{ hours.get_weekday_display }}: {{ hours.from_hour|date:"H:i" }} - {{ hours.to_hour|date:"H:i" }}</li>
                            {% endfor %}
                        </ul>
                    </div>
        
                    <!-- Right Section for Company Info -->
                    <div class="col-md-6" style="text-align: center;">
                        <h5>{{business.name}}</h5>
                        <ul class="list-unstyled">
                            <li>1234 Business Blvd</li>
                            <li>Marketing City, MC 12345</li>
                            <li>(123) 456-7890</li>
                        </ul>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        $(document).ready(function() {
            
            $('#sidebarCollapse').on('click', function () {
                var sidebar = $('#mySidebar');
                var icon = $(this).find('i');
                if (sidebar.width() > 0) {
                    sidebar.css('width', '0');
                    $('.main').css('margin-left', '0');
                    icon.removeClass('fa-times').addClass('fa-bars');
                } else {
                    sidebar.css('width', '250px');
                    $('.main').css('margin-left', '250px');
                    icon.removeClass('fa-bars').addClass('fa-times');
                }
            });

            // Adjust sidebar and main content when window is resized
            $(window).resize(function() {
                if ($(window).width() > 767 && !$('#mySidebar').hasClass('active')) {
                    $('#mySidebar').css('width', '250px').addClass('active');
                    $('.main').css('margin-left', '250px');
                    $('#sidebarCollapse i').removeClass('fa-bars').addClass('fa-times');
                } else if ($(window).width() <= 767 && $('#mySidebar').hasClass('active')) {
                    $('#mySidebar').css('width', '0').removeClass('active');
                    $('.main').css('margin-left', '0');
                    $('#sidebarCollapse i').removeClass('fa-times').addClass('fa-bars');
                }
            });

            // Ensure the sidebar is initialized correctly based on the screen size
            $('#mySidebar').removeClass('active').css('width', '0');
            $('.main').css('margin-left', '0');
            $('#sidebarCollapse i').addClass('fa-bars');
});
</script>

{% block extra_script %}
{% endblock extra_script %}
